---
plan: 02-02
title: Create Document Schemas
phase: 2
wave: 1
depends_on:
  - 02-01
files_modified:
  - sanity/schemas/index.ts
  - sanity/schemas/documents/siteSettings.ts
  - sanity/schemas/documents/page.ts
  - sanity/schemas/documents/teamMember.ts
  - sanity/schemas/objects/blockContent.ts
  - sanity/schemas/objects/seo.ts
  - sanity/structure.ts
  - sanity.config.ts
autonomous: true
---

# Plan 02-02: Create Document Schemas

## Objective
Create all Sanity document schemas (siteSettings, page, teamMember) and reusable object schemas (blockContent, seo) with Dutch labels for KoorFameus administrators.

## must_haves
- siteSettings schema as singleton with site-wide configuration
- page schema with slug, hero, content, and SEO fields
- teamMember schema with name, role, choir, photo, and bio fields
- blockContent reusable rich text schema
- seo reusable object schema
- Desk structure with singleton pattern for siteSettings
- All schemas registered in sanity.config.ts

## Tasks

<task id="1">
**Create schema directory structure**

Create the folder structure for organized schemas:

```bash
mkdir -p sanity/schemas/documents
mkdir -p sanity/schemas/objects
mkdir -p sanity/lib
```
</task>

<task id="2" depends_on="1">
**Create blockContent schema**

Create `sanity/schemas/objects/blockContent.ts`:

```typescript
import { defineType, defineArrayMember } from 'sanity'

export default defineType({
  name: 'blockContent',
  title: 'Block Content',
  type: 'array',
  of: [
    defineArrayMember({
      type: 'block',
      styles: [
        { title: 'Normaal', value: 'normal' },
        { title: 'Kop 2', value: 'h2' },
        { title: 'Kop 3', value: 'h3' },
        { title: 'Quote', value: 'blockquote' },
      ],
      lists: [
        { title: 'Bullet', value: 'bullet' },
        { title: 'Nummer', value: 'number' },
      ],
      marks: {
        decorators: [
          { title: 'Vet', value: 'strong' },
          { title: 'Cursief', value: 'em' },
        ],
        annotations: [
          {
            name: 'link',
            type: 'object',
            title: 'Link',
            fields: [
              {
                name: 'href',
                type: 'url',
                title: 'URL',
                validation: (Rule) =>
                  Rule.uri({ allowRelative: true, scheme: ['http', 'https', 'mailto'] }),
              },
            ],
          },
        ],
      },
    }),
    defineArrayMember({
      type: 'image',
      options: { hotspot: true },
    }),
  ],
})
```
</task>

<task id="3" depends_on="1">
**Create seo schema**

Create `sanity/schemas/objects/seo.ts`:

```typescript
import { defineField, defineType } from 'sanity'

export default defineType({
  name: 'seo',
  title: 'SEO',
  type: 'object',
  fields: [
    defineField({
      name: 'metaTitle',
      title: 'Meta Titel',
      type: 'string',
      description: 'Laat leeg voor standaard titel',
    }),
    defineField({
      name: 'metaDescription',
      title: 'Meta Beschrijving',
      type: 'text',
      rows: 3,
      validation: (Rule) => Rule.max(160).warning('Beschrijving mag maximaal 160 karakters zijn'),
    }),
    defineField({
      name: 'ogImage',
      title: 'Social Media Afbeelding',
      type: 'image',
      description: '1200x630px aanbevolen voor optimale weergave op social media',
    }),
  ],
})
```
</task>

<task id="4" depends_on="2,3">
**Create siteSettings schema**

Create `sanity/schemas/documents/siteSettings.ts`:

```typescript
import { defineField, defineType } from 'sanity'
import { Cog } from 'lucide-react'

export default defineType({
  name: 'siteSettings',
  title: 'Site Instellingen',
  type: 'document',
  icon: Cog,
  fields: [
    defineField({
      name: 'siteName',
      title: 'Website Naam',
      type: 'string',
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: 'siteDescription',
      title: 'Website Beschrijving',
      type: 'text',
      rows: 3,
      description: 'Korte beschrijving voor zoekmachines (SEO)',
    }),
    defineField({
      name: 'contactEmail',
      title: 'Contact Email',
      type: 'string',
      validation: (Rule) => Rule.email(),
    }),
    defineField({
      name: 'socialLinks',
      title: 'Social Media Links',
      type: 'object',
      fields: [
        defineField({ name: 'instagram', title: 'Instagram URL', type: 'url' }),
        defineField({ name: 'facebook', title: 'Facebook URL', type: 'url' }),
        defineField({ name: 'youtube', title: 'YouTube URL', type: 'url' }),
      ],
    }),
    defineField({
      name: 'logo',
      title: 'Logo',
      type: 'image',
      options: { hotspot: true },
    }),
  ],
  preview: {
    prepare() {
      return { title: 'Site Instellingen' }
    },
  },
})
```
</task>

<task id="5" depends_on="2,3">
**Create page schema**

Create `sanity/schemas/documents/page.ts`:

```typescript
import { defineField, defineType } from 'sanity'
import { FileText } from 'lucide-react'

export default defineType({
  name: 'page',
  title: 'Pagina',
  type: 'document',
  icon: FileText,
  fields: [
    defineField({
      name: 'title',
      title: 'Titel',
      type: 'string',
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: 'slug',
      title: 'Slug',
      type: 'slug',
      options: { source: 'title', maxLength: 96 },
      validation: (Rule) => Rule.required(),
      description: 'URL-vriendelijke naam voor de pagina',
    }),
    defineField({
      name: 'heroImage',
      title: 'Hero Afbeelding',
      type: 'image',
      options: { hotspot: true },
    }),
    defineField({
      name: 'heroText',
      title: 'Hero Tekst',
      type: 'text',
      rows: 3,
      description: 'Korte tekst die over de hero afbeelding wordt getoond',
    }),
    defineField({
      name: 'content',
      title: 'Inhoud',
      type: 'blockContent',
    }),
    defineField({
      name: 'seo',
      title: 'SEO',
      type: 'seo',
    }),
  ],
  preview: {
    select: { title: 'title', media: 'heroImage' },
  },
})
```
</task>

<task id="6" depends_on="1">
**Create teamMember schema**

Create `sanity/schemas/documents/teamMember.ts`:

```typescript
import { defineField, defineType } from 'sanity'
import { User } from 'lucide-react'

export default defineType({
  name: 'teamMember',
  title: 'Teamlid',
  type: 'document',
  icon: User,
  fields: [
    defineField({
      name: 'name',
      title: 'Naam',
      type: 'string',
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: 'role',
      title: 'Rol',
      type: 'string',
      options: {
        list: [
          { title: 'Dirigent', value: 'dirigent' },
          { title: 'Bestuurslid', value: 'bestuur' },
          { title: 'Begeleider', value: 'begeleider' },
        ],
        layout: 'radio',
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: 'boardPosition',
      title: 'Bestuursfunctie',
      type: 'string',
      description: 'Bijv. Voorzitter, Secretaris, Penningmeester',
      hidden: ({ parent }) => parent?.role !== 'bestuur',
    }),
    defineField({
      name: 'choir',
      title: 'Koor',
      type: 'string',
      options: {
        list: [
          { title: 'Startkoor', value: 'startkoor' },
          { title: 'Kinderkoor', value: 'kinderkoor' },
          { title: 'Jeugdkoor', value: 'jeugdkoor' },
          { title: 'Alle koren', value: 'alle' },
        ],
      },
      hidden: ({ parent }) => parent?.role === 'bestuur',
    }),
    defineField({
      name: 'photo',
      title: 'Foto',
      type: 'image',
      options: { hotspot: true },
      description: 'Vierkante foto aanbevolen',
    }),
    defineField({
      name: 'bio',
      title: 'Biografie',
      type: 'text',
      rows: 4,
    }),
    defineField({
      name: 'order',
      title: 'Volgorde',
      type: 'number',
      description: 'Lagere nummers verschijnen eerst',
      initialValue: 100,
    }),
  ],
  orderings: [
    {
      title: 'Volgorde',
      name: 'orderAsc',
      by: [{ field: 'order', direction: 'asc' }],
    },
    {
      title: 'Naam',
      name: 'nameAsc',
      by: [{ field: 'name', direction: 'asc' }],
    },
  ],
  preview: {
    select: {
      title: 'name',
      subtitle: 'role',
      media: 'photo',
      boardPosition: 'boardPosition',
    },
    prepare({ title, subtitle, media, boardPosition }) {
      const roleLabels: Record<string, string> = {
        dirigent: 'Dirigent',
        bestuur: 'Bestuur',
        begeleider: 'Begeleider',
      }
      const displaySubtitle = subtitle === 'bestuur' && boardPosition
        ? `Bestuur - ${boardPosition}`
        : roleLabels[subtitle] || subtitle
      return { title, subtitle: displaySubtitle, media }
    },
  },
})
```
</task>

<task id="7" depends_on="4,5,6">
**Create schema index**

Create `sanity/schemas/index.ts`:

```typescript
import siteSettings from './documents/siteSettings'
import page from './documents/page'
import teamMember from './documents/teamMember'
import blockContent from './objects/blockContent'
import seo from './objects/seo'

export const schemaTypes = [
  // Documents
  siteSettings,
  page,
  teamMember,
  // Objects
  blockContent,
  seo,
]
```
</task>

<task id="8" depends_on="7">
**Create desk structure**

Create `sanity/structure.ts`:

```typescript
import type { StructureResolver } from 'sanity/structure'
import { Cog, FileText, Users } from 'lucide-react'

export const structure: StructureResolver = (S) =>
  S.list()
    .title('Content')
    .items([
      // Singleton: Site Settings
      S.listItem()
        .title('Site Instellingen')
        .icon(Cog)
        .child(
          S.document()
            .schemaType('siteSettings')
            .documentId('siteSettings')
            .title('Site Instellingen')
        ),

      S.divider(),

      // Pages
      S.documentTypeListItem('page').title("Pagina's").icon(FileText),

      // Team Members
      S.documentTypeListItem('teamMember').title('Team').icon(Users),
    ])
```
</task>

<task id="9" depends_on="7,8">
**Update sanity.config.ts**

Update `sanity.config.ts` to use the schemas and structure:

```typescript
import { defineConfig } from 'sanity'
import { structureTool } from 'sanity/structure'
import { schemaTypes } from './sanity/schemas'
import { structure } from './sanity/structure'

export default defineConfig({
  name: 'koorfameus-studio',
  title: 'KoorFameus',

  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!,
  dataset: process.env.NEXT_PUBLIC_SANITY_DATASET!,

  basePath: '/studio',

  plugins: [
    structureTool({ structure }),
  ],

  schema: {
    types: schemaTypes,
  },
})
```
</task>

## Verification

1. **File structure check:**
   Verify all schema files exist:
   - `sanity/schemas/index.ts`
   - `sanity/schemas/documents/siteSettings.ts`
   - `sanity/schemas/documents/page.ts`
   - `sanity/schemas/documents/teamMember.ts`
   - `sanity/schemas/objects/blockContent.ts`
   - `sanity/schemas/objects/seo.ts`
   - `sanity/structure.ts`

2. **TypeScript check:**
   ```bash
   npx tsc --noEmit
   ```
   No TypeScript errors in schema files.

3. **Schema registration:**
   Open `sanity.config.ts` and verify it imports `schemaTypes` and `structure`.

4. **Studio verification (after Plan 02-03):**
   Navigate to `/studio` and verify:
   - "Site Instellingen" appears as singleton
   - "Pagina's" shows document list
   - "Team" shows document list
   - Creating a new page shows all fields correctly
   - Creating a new teamMember shows conditional fields (choir hidden for bestuur role)
