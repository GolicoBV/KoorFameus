# Phase 9.1: Design Change - Research

**Researched:** 2026-02-06
**Domain:** Visual design system, typography, color theming
**Confidence:** HIGH

## Summary

This research covers the technical implementation of a visual refresh for KoorFameus, transitioning from coral (#F3504C) to a purple-orange palette derived from the existing logo. The logo analysis reveals a vibrant purple (approximately #7B2FBE) as the dominant color that should become the new primary.

The implementation leverages Tailwind CSS v4's `@theme` directive with OKLCH color values for perceptually uniform colors, and introduces an elegant serif font (Cormorant Garamond) for headings to match the choir/musical theme while keeping the current Geist Sans for body text.

**Primary recommendation:** Replace coral with violet-500 as primary color using Tailwind's built-in OKLCH values, add orange-500 as accent, introduce Cormorant Garamond for headings via next/font, and update shadows to use layered soft shadows for a floating card feel.

## Standard Stack

The established libraries/tools for this domain:

### Core (Already in Project)
| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| Tailwind CSS | v4 | CSS framework with @theme directive | CSS-first theming, OKLCH colors built-in |
| shadcn/ui | latest | Component library | Already integrated, uses CSS variables |
| next/font/google | 16.1.6 | Font optimization | Zero-layout-shift font loading |
| Geist | 1.5.1 | Sans-serif body font | Already in use, modern and readable |

### To Be Added
| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| Cormorant Garamond | Google Font | Elegant serif for headings | Titles, hero text, musical elegance |

### Alternatives Considered
| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| Cormorant Garamond | Playfair Display | Playfair is more dramatic; Cormorant is more refined and better for smaller headings |
| Cormorant Garamond | Libre Baskerville | Libre is more sturdy/traditional; Cormorant is more elegant/display-oriented |
| Custom color scale | Tailwind violet/orange | Custom allows exact logo match; Tailwind built-in is battle-tested and perceptually uniform |

**Installation:**
```bash
# No new packages needed - Cormorant Garamond via next/font/google
```

## Architecture Patterns

### Recommended Color Token Structure
```css
/* globals.css - Replace coral with purple (violet) as primary */
@theme {
  /* Purple palette derived from logo - using Tailwind violet scale */
  --color-purple: oklch(0.606 0.25 292.717);        /* violet-500 - PRIMARY */
  --color-purple-dark: oklch(0.541 0.281 293.009);  /* violet-600 */
  --color-purple-light: oklch(0.702 0.183 293.541); /* violet-400 */

  /* Orange accent - complementary to purple */
  --color-accent-orange: oklch(0.705 0.213 47.604);       /* orange-500 */
  --color-accent-orange-dark: oklch(0.646 0.222 41.116);  /* orange-600 */

  /* Warm background tones */
  --color-bg-cream: oklch(0.985 0.01 90);           /* Warm off-white */
  --color-bg-section: oklch(0.975 0.015 85);        /* Slightly warmer section bg */
}
```

### Font Integration Pattern (Tailwind v4 + Next.js)
```tsx
// app/layout.tsx
import { GeistSans } from "geist/font/sans";
import { Cormorant_Garamond } from "next/font/google";

const cormorant = Cormorant_Garamond({
  subsets: ["latin"],
  weight: ["400", "500", "600", "700"],
  variable: "--font-cormorant",
  display: "swap",
});

export default function RootLayout({ children }) {
  return (
    <html lang="nl" className={`${GeistSans.className} ${cormorant.variable}`}>
      {/* ... */}
    </html>
  );
}
```

```css
/* globals.css */
@theme inline {
  --font-heading: var(--font-cormorant), serif;
}

/* Usage in components */
.font-heading { font-family: var(--font-heading); }
```

### Pattern 1: CSS Variable-Based Theming
**What:** All colors flow through CSS custom properties defined in @theme
**When to use:** Always for brand colors, allows future dark mode
**Example:**
```css
/* Source: Tailwind CSS v4 docs - https://tailwindcss.com/docs/theme */
:root {
  --primary: oklch(0.606 0.25 292.717);
  --primary-foreground: oklch(1 0 0);
  --ring: oklch(0.606 0.25 292.717);
}

@theme inline {
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-ring: var(--ring);
}
```

### Pattern 2: Layered Soft Shadows
**What:** Multiple stacked box-shadows for realistic depth
**When to use:** Cards, elevated components, floating elements
**Example:**
```css
/* Source: Josh W. Comeau - https://www.joshwcomeau.com/css/designing-shadows/ */
@theme {
  --shadow-soft-sm:
    0 1px 1px oklch(0.3 0.02 290 / 0.04),
    0 2px 2px oklch(0.3 0.02 290 / 0.04);

  --shadow-soft-md:
    0 1px 1px oklch(0.3 0.02 290 / 0.03),
    0 2px 2px oklch(0.3 0.02 290 / 0.03),
    0 4px 4px oklch(0.3 0.02 290 / 0.03),
    0 8px 8px oklch(0.3 0.02 290 / 0.03);

  --shadow-soft-lg:
    0 1px 1px oklch(0.3 0.02 290 / 0.02),
    0 2px 2px oklch(0.3 0.02 290 / 0.02),
    0 4px 4px oklch(0.3 0.02 290 / 0.02),
    0 8px 8px oklch(0.3 0.02 290 / 0.02),
    0 16px 16px oklch(0.3 0.02 290 / 0.02);
}
```

### Pattern 3: Find-and-Replace Color Migration
**What:** Systematic replacement of coral references with purple
**When to use:** Component-by-component migration
**Example:**
```tsx
// BEFORE
className="bg-coral text-white hover:bg-coral-dark"
className="text-coral hover:text-coral-dark"
className="bg-coral/10 text-coral"

// AFTER
className="bg-purple text-white hover:bg-purple-dark"
className="text-purple hover:text-purple-dark"
className="bg-purple/10 text-purple"
```

### Anti-Patterns to Avoid
- **Hardcoding hex values:** Always use CSS variables or Tailwind classes, never inline hex
- **Mixing color spaces:** Stick to OKLCH throughout for consistency
- **One-off shadows:** Use the elevation system, don't create ad-hoc shadow values
- **Font loading without display:swap:** Always use display: "swap" to prevent FOIT

## Don't Hand-Roll

Problems that look simple but have existing solutions:

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Color palette | Custom hex scales | Tailwind violet/orange OKLCH scales | Perceptually uniform, tested across devices |
| Shadow system | Individual box-shadow values | Layered shadow tokens (3 levels) | Consistency, easier maintenance |
| Font loading | Manual @font-face | next/font/google | Zero layout shift, automatic optimization |
| Color contrast checking | Manual testing | Use OKLCH lightness values | OKLCH lightness directly correlates to contrast |
| Gradient generation | Manual color stops | OKLCH interpolation | Smoother gradients through perceptual color space |

**Key insight:** Tailwind v4's OKLCH implementation means the built-in color scales are more perceptually accurate than hand-picked hex values. Use the violet and orange scales rather than trying to match exact logo colors.

## Common Pitfalls

### Pitfall 1: OKLCH Gamut Issues
**What goes wrong:** Some OKLCH colors fall outside sRGB gamut on older displays
**Why it happens:** OKLCH can express colors that sRGB cannot display
**How to avoid:** Use Tailwind's built-in scales (already gamut-mapped) or test with `color-mix(in oklch, ...)`
**Warning signs:** Colors look different/clipped on certain monitors

### Pitfall 2: Font Variable Not Applying in Tailwind v4
**What goes wrong:** Custom font via next/font doesn't work with Tailwind classes
**Why it happens:** Tailwind v4 can't access CSS variables injected by Next.js directly
**How to avoid:** Use `@theme inline` to bridge the variable into Tailwind's theme system
**Warning signs:** Font-family utility classes have no effect

### Pitfall 3: Incomplete Color Migration
**What goes wrong:** Missed coral references cause visual inconsistency
**Why it happens:** coral is used in ~100+ places across components
**How to avoid:** Use grep to find ALL coral references before starting; create checklist
**Warning signs:** Random coral/purple mix in UI

### Pitfall 4: Contrast Ratio Failures
**What goes wrong:** Purple text on light backgrounds fails WCAG
**Why it happens:** Violet-500 may not have enough contrast for small text
**How to avoid:** Use violet-700+ for text, violet-500 for large text/buttons; test with contrast checker
**Warning signs:** Text appears washed out, accessibility audit failures

### Pitfall 5: Shadow Color Mismatch
**What goes wrong:** Black shadows look harsh with purple/orange palette
**Why it happens:** Pure black shadows don't match warm color palette
**How to avoid:** Tint shadows with low-saturation purple (hue ~290)
**Warning signs:** Shadows feel disconnected from the design

## Code Examples

Verified patterns from official sources:

### Color Variable Definition (Tailwind v4)
```css
/* Source: https://tailwindcss.com/docs/theme */
@import "tailwindcss";

@theme {
  /* Clear existing coral colors */
  --color-coral: initial;
  --color-coral-dark: initial;
  --color-coral-light: initial;

  /* New purple primary - from Tailwind violet scale */
  --color-purple: oklch(0.606 0.25 292.717);
  --color-purple-dark: oklch(0.541 0.281 293.009);
  --color-purple-light: oklch(0.702 0.183 293.541);
  --color-purple-50: oklch(0.969 0.016 293.756);

  /* Orange accent - from Tailwind orange scale */
  --color-orange: oklch(0.705 0.213 47.604);
  --color-orange-dark: oklch(0.646 0.222 41.116);

  /* Warm backgrounds */
  --color-bg-cream: oklch(0.985 0.012 85);
  --color-bg-warm: oklch(0.975 0.018 80);
}
```

### shadcn/ui Theme Variables Update
```css
/* Source: https://ui.shadcn.com/docs/theming */
:root {
  /* Primary = Purple */
  --primary: oklch(0.606 0.25 292.717);
  --primary-foreground: oklch(1 0 0);

  /* Ring = Purple for focus states */
  --ring: oklch(0.606 0.25 292.717);

  /* Sidebar primary = Purple */
  --sidebar-primary: oklch(0.606 0.25 292.717);
  --sidebar-primary-foreground: oklch(1 0 0);
  --sidebar-ring: oklch(0.606 0.25 292.717);

  /* Warm background */
  --background: oklch(0.985 0.012 85);
}

@theme inline {
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-ring: var(--ring);
}
```

### Font Setup with CSS Variable Bridge
```tsx
// Source: https://nextjs.org/docs/app/getting-started/fonts
// app/layout.tsx
import { GeistSans } from "geist/font/sans";
import { Cormorant_Garamond } from "next/font/google";

const cormorant = Cormorant_Garamond({
  subsets: ["latin"],
  weight: ["400", "500", "600", "700"],
  variable: "--font-cormorant",
  display: "swap",
});

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="nl" className={`${GeistSans.className} ${cormorant.variable}`}>
      <body className="antialiased">{children}</body>
    </html>
  );
}
```

```css
/* globals.css - Tailwind v4 font integration */
/* Source: Tailwind v4 discussions */
@theme inline {
  --font-heading: var(--font-cormorant), Georgia, serif;
}

@layer base {
  h1, h2, h3 {
    font-family: var(--font-heading);
  }
}
```

### Button Variant Migration
```tsx
// components/ui/button.tsx - Update coral variants to purple
const buttonVariants = cva(
  "...",
  {
    variants: {
      variant: {
        // REPLACE coral variants
        purple:
          "bg-purple text-white hover:bg-purple-dark shadow-sm transition-colors duration-200",
        "purple-outline":
          "border-2 border-purple text-purple hover:bg-purple hover:text-white transition-colors duration-200",
        // ADD orange accent variant
        accent:
          "bg-orange text-white hover:bg-orange-dark shadow-sm transition-colors duration-200",
      },
    },
  }
);
```

### Soft Shadow Classes
```css
/* Custom shadow utilities */
@layer utilities {
  .shadow-soft-sm {
    box-shadow:
      0 1px 1px oklch(0.3 0.02 290 / 0.04),
      0 2px 2px oklch(0.3 0.02 290 / 0.04);
  }

  .shadow-soft-md {
    box-shadow:
      0 1px 1px oklch(0.3 0.02 290 / 0.03),
      0 2px 2px oklch(0.3 0.02 290 / 0.03),
      0 4px 4px oklch(0.3 0.02 290 / 0.03),
      0 8px 8px oklch(0.3 0.02 290 / 0.03);
  }

  .shadow-soft-lg {
    box-shadow:
      0 1px 1px oklch(0.3 0.02 290 / 0.02),
      0 2px 2px oklch(0.3 0.02 290 / 0.02),
      0 4px 4px oklch(0.3 0.02 290 / 0.02),
      0 8px 8px oklch(0.3 0.02 290 / 0.02),
      0 16px 16px oklch(0.3 0.02 290 / 0.02);
  }
}
```

## Logo Color Analysis

From visual inspection of `public/images/logo.png`:

| Logo Element | Approximate Color | Closest Tailwind | OKLCH Value |
|--------------|-------------------|------------------|-------------|
| Upper curl (prominent) | Vibrant purple | violet-500 | oklch(0.606 0.25 292.717) |
| Top section | Blue | blue-500 | oklch(0.623 0.214 259.815) |
| Circle (magenta) | Pink/magenta | fuchsia-500 | oklch(0.667 0.295 322.15) |
| Circle (green) | Green | green-500 | oklch(0.723 0.219 149.579) |
| Bottom section | Orange/yellow | orange-400 | oklch(0.75 0.183 55.934) |
| Lower section | Red | red-500 | oklch(0.637 0.237 25.331) |

**Recommendation:** Use **violet-500** as primary (matches dominant purple) and **orange-500** as accent (present in logo, complementary color theory).

## Specific Implementation Decisions

Based on CONTEXT.md decisions:

### Purple Usage Balance (Claude's Discretion)
**Recommendation:** Use purple as primary interactive color (buttons, links, highlights) with orange reserved for special CTAs and accents. Avoid purple backgrounds on large sections - use cream/off-white instead.

### Font Pairing (Claude's Discretion)
**Recommendation:** Cormorant Garamond (400, 600, 700) for h1-h3 headings + Geist Sans for body. This provides elegant musical feel while maintaining readability.

### Button Styles (Claude's Discretion)
**Recommendation:**
- Primary: Solid purple background (prominent CTAs)
- Secondary: Purple outline (less prominent actions)
- Accent: Solid orange (special highlight, used sparingly)
- Ghost: Transparent with purple text (navigation, subtle actions)

### Shadow Values (Claude's Discretion)
**Recommendation:** Three-level elevation system using purple-tinted layered shadows:
- `shadow-soft-sm`: Subtle cards, inputs
- `shadow-soft-md`: Elevated cards, dropdowns
- `shadow-soft-lg`: Modals, floating elements

## Migration Scope

Files requiring coral-to-purple replacement (from grep analysis):

| File | Coral References | Priority |
|------|------------------|----------|
| globals.css | Color definitions, gradients | HIGH - Update first |
| components/ui/button.tsx | Button variants | HIGH |
| components/header.tsx | Logo text, nav active states | HIGH |
| components/footer.tsx | Social icons, links | MEDIUM |
| app/page.tsx | Hero, sections, CTAs | HIGH |
| app/contact/page.tsx | Icons, cards, links | MEDIUM |
| app/koren/page.tsx | CTAs, badges, icons | MEDIUM |
| app/evenementen/page.tsx | Date badges, icons | MEDIUM |
| Other pages | Various accent usages | LOW |

**Total estimated replacements:** ~100 instances across ~15 files

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| HSL color format | OKLCH color format | Tailwind v4 (2024) | More perceptually uniform colors |
| tailwind.config.js | @theme directive in CSS | Tailwind v4 (2024) | CSS-first configuration |
| Single box-shadow | Layered shadows | 2023+ | More realistic depth perception |
| @import fonts | next/font | Next.js 13+ (2022) | Zero layout shift, better performance |

**Deprecated/outdated:**
- **tailwind.config.js for colors**: Use @theme in globals.css instead
- **HSL for brand colors**: Use OKLCH for perceptual uniformity
- **Single flat shadows**: Use layered shadows for modern feel

## Open Questions

Things that couldn't be fully resolved:

1. **Exact logo purple hex value**
   - What we know: Visually matches violet-500 closely
   - What's unclear: Exact hex from original logo source files
   - Recommendation: Use Tailwind violet-500 (battle-tested OKLCH value)

2. **Cormorant Garamond vs Playfair Display for headings**
   - What we know: Both are elegant serifs suitable for musical contexts
   - What's unclear: Which feels more "choir-appropriate" without user testing
   - Recommendation: Start with Cormorant Garamond (more refined, lighter weight options)

3. **Orange accent usage frequency**
   - What we know: Should be complementary accent, not competing with purple
   - What's unclear: Exact ratio of purple:orange usage
   - Recommendation: 80% purple, 20% orange as starting point; orange for special CTAs only

## Sources

### Primary (HIGH confidence)
- Tailwind CSS v4 Theme Documentation - https://tailwindcss.com/docs/theme
- Tailwind CSS v4 Colors Documentation - https://tailwindcss.com/docs/colors
- shadcn/ui Theming Documentation - https://ui.shadcn.com/docs/theming
- Next.js Font Optimization - https://nextjs.org/docs/app/getting-started/fonts
- Josh W. Comeau Shadow Design - https://www.joshwcomeau.com/css/designing-shadows/

### Secondary (MEDIUM confidence)
- Google Fonts Cormorant Garamond - https://fonts.google.com/specimen/Cormorant+Garamond
- Typewolf Best Google Fonts 2026 - https://www.typewolf.com/google-fonts
- Medium: Custom Fonts Next.js + Tailwind v4 - https://medium.com/@divineosehotue/using-custom-fonts-in-next-js-tailwind-css-v4-a37057b18f7f

### Tertiary (LOW confidence)
- iColorPalette Purple/Orange combinations - https://icolorpalette.com/purple-and-orange (for inspiration only)

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH - Using established Tailwind v4 + shadcn patterns
- Architecture: HIGH - Verified against official documentation
- Typography: MEDIUM - Font choice is aesthetic judgment, verified technical approach
- Pitfalls: HIGH - Based on documented issues in Tailwind/Next.js discussions
- Color values: HIGH - Using Tailwind's built-in OKLCH scales

**Research date:** 2026-02-06
**Valid until:** 2026-03-06 (30 days - stable technology stack)
